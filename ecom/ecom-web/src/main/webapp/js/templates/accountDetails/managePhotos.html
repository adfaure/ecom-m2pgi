<div data-ng-controller="managePhotos">

<h3>Manage photos ({{ photos.length }})</h3>

<table class="table">
  <tbody>
    <tr ng-repeat="photo in photos">
      <td>
        <img width="128" ng-src="{{ photo.webLocation }}" alt="{{ photo.name }}">
      </td>
      <td ng-if="editIndex != $index"><strong>{{ photo.name | limitTo : 20 }}</srong></td>
      <td ng-if="editIndex == $index">
        <input required ng-model="form.name" ng-change="test()" class="form-control"
         type="text" ng-disabled="processing">
      </td>
      <td>
        <textarea required ng-if="editIndex == $index" class="form-control"
         ng-model="form.description" ng-change="test()" ng-disabled="processing"></textarea>
        <span ng-if="editIndex != $index">{{ photo.description }}</span>
      </td>
      <td ng-if="editIndex != $index">{{ photo.price | currency:"&euro;" }}</td>
      <td ng-if="editIndex == $index">
        <input required ng-model="form.price" ng-change="test()" class="form-control" type="number" min="1" max="10" ng-disabled="processing">
      </td>
      <td>
        <button ng-if="editIndex != $index" class="btn" ng-click="edit($index)" ng-disabled="processing">
          <span class="glyphicon glyphicon-pencil"></span> Edit
        </button>
        <button ng-if="editIndex == $index" class="btn btn-success" ng-click="save($index)" ng-disabled="!valid">
          <span class="glyphicon glyphicon-save"></span> Save
        </button>
        <button ng-if="editIndex != $index" class="btn btn-danger" ng-click="remove($index)"
        ng-disabled="processing">
          <span class="glyphicon glyphicon-remove"></span> Delete
        </button>
        <button ng-if="editIndex == $index" class="btn btn" ng-click="cancel()" ng-disabled="processing">
          <span class="glyphicon glyphicon-cancel"></span> Cancel
        </button>
      </td>
    </tr>
  </tbody>
</table>
</div>
